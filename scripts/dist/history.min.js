function parseHistoryData(e){var t={};for(var i in e){var r=e[i];r&&(t[r.id]=r)}parseInventory("null",replicateSteamResponse({inventory:t}),(function(t,i){var r={};for(var a in e){var s=e[a];s&&(r[a]=t[s.id])}setupHistorySummaries(r)}))}function setupHistorySummaries(e){$(".tradehistoryrow").each((function(){var t={mine:{items:0,total:0,types:{}},partner:{items:0,total:0,types:{}}};$(this).find(".economy_item_hoverable").each((function(){$(this).find("img").css({"border-color":"rgba(30, 52, 84, 0.62)","box-shadow":"inset 0px 0px 8px 1px rgb(0, 0, 0)",padding:"2px","background-color":"rgb(27, 40, 56)"});var i=$(this).attr("id").indexOf("received")>-1?"mine":"partner";"mine"==i&&$(this).css({"flex-basis":"auto",width:"30%","overflow-y":"overlay"});var r=e[$(this).attr("id")];null!=r&&(t[i].items+=1,t[i].total+=r.price?r.price:0,t[i].types[r.type]?t[i].types[r.type]+=1:t[i].types[r.type]=1)}));var i=this;Object.keys(t).forEach((function(r){var a="mine"==r?"received":"given",s=$(i).find(".tradehistory_items_"+a);s.css({display:"flex","flex-wrap":"wrap","flex-direction":"row","justify-content":"flex-start"});var n=$(s).find(".history_item.economy_item_hoverable").sort((function(t,i){var r=e[$(t).attr("id")];null!=r&&r.price||(r.price=0);var a=e[$(i).attr("id")];return null!=a&&a.price||(a.price=0),a.price-r.price}));s.empty();var o=n.length>3&&"received"==a?"100":0;s.append('<div style="margin-right: '+o+'%" class="tradehistory_items_plusminus">'+("received"==a?"+":"-")+"</div>"),n.appendTo(s).not(":last").after("mine"==r?"":",&nbsp;"),s.after('<div class="st-trade-offer-prices st-trade-offer-prices-history">'+formatPrice(t[r].total)+'<div class="st-display-right">'+t[r].items+" "+(t[r].items>1?"items":"item")+"</div>"+buildItemSummary(t[r].types))}))}))}getSteamID(!0,(function(e){checkVerification(e,(function(e){e.success&&e.verified&&($(".profile_small_header_text").before('<div class="st-verified-profile st-verified-inv-page">'+e.name+"</div>"),$(".profile_small_header_text").css("bottom","25px"))}))})),injectScriptWithEvent({"%%lastId%%":$(".history_item.economy_item_hoverable").last().attr("id")},(function(){var e={};HistoryPageCreateItemHover=function(t,i,r,a,s){CreateItemHoverFromContainer(g_rgHistoryInventory,t,i,r,a,s),730!=i&&2!=r||(e[t]=g_rgHistoryInventory[730][2][a],"%%lastId%%"==t&&window.dispatchEvent(new CustomEvent("%%event%%",{detail:e})))},Event.fire(document,"dom:loaded")}),parseHistoryData),injectScriptWithEvent({},stickerPriceInjection,stickerPriceCallback);